extends layout
block header
  link(href="css/dashboard.css" rel="stylesheet")

block content
  div(ng-controller="dashboardController")
    .row
      .col-md-12
        h1.title.text-center Wilkommen zur Big-Data Renn-Analyse!
        h3.subtitle.text-center Alles was du zur Formel 1 wissen musst.
    .row
      .col-md-6
        placeholder(loadingdata="topTenRacers", height="800px")
          .jumbotron.card-container.ng-cloak
            .row
              .col-md-12
                #party
            hr
            .row
              .col-md-12
                h2.card-title.text-center Die reichsten Rennfahrer
            .row
              .col-md-12
                table.table.table-bordered
                  .thead.thead-default
                    tr
                      th #
                      th Rennfahrer ID
                      th.text-right Gewonnenes Geld
                  .tbody
                    tr(ng-repeat="racer in topTenEarningRacers")
                      th(ng-bind="$index + 1")
                      th(ng-bind="racer._id")
                      th.text-right(ng-bind="racer.totalMoneyWon")

      .col-md-6
        placeholder(loadingdata="topTenRacers", height="800px")
          .jumbotron.card-container.ng-cloak
            .row
              .col-md-12
                #champagne-shower
            hr
            .row
              .col-md-12
                h2.card-title.text-center Die erfolgreichsten Rennfahrer
            .row
              .col-md-12
                table.table.table-bordered
                  .thead.thead-default
                    tr
                      th #
                      th Rennfahrer ID
                      th.text-right Gewonnene Rennen
                  .tbody
                    tr(ng-repeat="racer in topTenRacers")
                      th(ng-bind="$index + 1")
                      th(ng-bind="racer._id")
                      th.text-right(ng-bind="racer.racesWon")
    .row
      .col-md-6
        placeholder(loadingdata="thunderyTracks", height="400px")
          .jumbotron.card-container.ng-cloak
            .row
              .col-md-12
                #thunder
            hr
            .row
              .col-md-12
                h2.card-title.text-center Rennbahnen mit den meisten Gewittern (insgesamt)
            .row
              .col-md-12
                table.table.table-bordered
                  .thead.thead-default
                    tr
                      th #
                      th Strecken ID
                      th.text-right Renntage mit Gewitter
                  .tbody
                    tr(ng-repeat="track in thunderyTracks")
                      th(ng-bind="$index + 1")
                      th(ng-bind="track.trackId")
                      th.text-right(ng-bind="track.weatherCount")
      .col-md-6
        placeholder(loadingdata="racesCount", height="500px")
          .jumbotron.card-container
            .row
              .col-md-12
                #race
            hr
            .row
              .col-md-12
                h2.card-title.text-center Wann finden die meisten Rennen statt?
              canvas#monthRaceChart
    .row
      .col-md-6
        placeholder(loadingdata="weatherChartData", height="900px")
          .jumbotron.card-container
            .row
              .col-md-12
                #sunny-track
            hr
            .row
              .col-md-12
                h2.card-title.text-center Sonnigste Rennbahnen
              canvas#weatherPie
    
block scripts
  script(src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.6.0/Chart.bundle.min.js")
  script(src="/js/services/race.js")
  script(src="/js/controllers/dashboard.js")
